"use strict";
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.Task = exports.TaskRef = exports.valueFrom = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
/**
 * This file includes the basic objects for creating Tasks and dependencies.
 * While cdk8s supports generating this file from the CRD, the Tekton CRD at
 * the moment does not have the fields specified. See https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml,
 * specifically here:
 *       schema:
 *         openAPIV3Schema:
 *           type: object
 *           # OpenAPIV3 schema allows Kubernetes to perform validation on the schema fields
 *           # and use the schema in tooling such as `kubectl explain`.
 *           # Using "x-kubernetes-preserve-unknown-fields: true"
 *           # at the root of the schema (or within it) allows arbitrary fields.
 *           # We currently perform our own validation separately.
 *           # See https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/#specifying-a-structural-schema
 *           # for more info.
 *           x-kubernetes-preserve-unknown-fields: true
 * For the time being, these objects are created manually using the latest
 * Tekton documentation as a reference.
 */
const cdk8s_1 = require("cdk8s");
const common_1 = require("./common");
/**
 * Creates an `env` source that can be used in the `env`'s `valueFrom`.
 * @param nk The name and key pair.
 */
function valueFrom(nk) {
    return {
        secretKeyRef: nk,
    };
}
exports.valueFrom = valueFrom;
/**
 * A `Task` reference. Will be generated as a `taskRef`.
 */
class TaskRef {
    constructor(name) {
        this.name = name;
    }
}
_a = JSII_RTTI_SYMBOL_1;
TaskRef[_a] = { fqn: "cdk8s-pipelines.TaskRef", version: "0.0.16" };
exports.TaskRef = TaskRef;
/**
 * A Tekton Task, which is
 * > a collection of Steps that you define and arrange in
 * > a specific order of execution as part of your continuous integration flow. A
 * > Task executes as a Pod on your Kubernetes cluster. A Task is available within a
 * > specific namespace, while a ClusterTask is available across the entire
 * > cluster.
 *
 * @see https://tekton.dev/docs/pipelines/tasks/
 */
class Task extends cdk8s_1.ApiObject {
    /**
     * Renders a Kubernetes manifest for "Task".
     *
     * This can be used to inline resource manifests inside other objects (e.g. as templates).
     *
     * @param props initialization props
     */
    static manifest(props = {}) {
        return {
            ...Task.GVK,
            ...props,
        };
    }
    /**
     * The configuration for the `Task`.
     */
    get spec() {
        return this._spec;
    }
    /**
     * Defines a "Task" API object
     * @param scope the scope in which to define this object
     * @param id a scope-local name for the object
     * @param props initialization props
     */
    constructor(scope, id, props = {}) {
        super(scope, id, {
            ...Task.GVK,
            ...props,
        });
        this._metadata = props.metadata;
        this._spec = props.spec;
    }
    /**
     * Renders the object to Kubernetes JSON.
     */
    toJson() {
        const result = {
            ...Task.GVK,
            ...{
                metadata: this._metadata,
                spec: this._spec,
            },
        };
        return Object.entries(result).reduce((r, i) => (i[1] === undefined) ? r : ({
            ...r,
            [i[0]]: i[1],
        }), {});
    }
}
_b = JSII_RTTI_SYMBOL_1;
Task[_b] = { fqn: "cdk8s-pipelines.Task", version: "0.0.16" };
/**
 * Returns the apiVersion and kind for "Task"
 */
Task.GVK = {
    apiVersion: common_1.TektonV1ApiVersion,
    kind: 'Task',
};
exports.Task = Task;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFza3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdGFza3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBa0JHO0FBQ0gsaUNBQXVFO0FBRXZFLHFDQUEwRTtBQVUxRTs7O0dBR0c7QUFDSCxTQUFnQixTQUFTLENBQUMsRUFBZTtJQUN2QyxPQUFPO1FBQ0wsWUFBWSxFQUFFLEVBQUU7S0FDakIsQ0FBQztBQUNKLENBQUM7QUFKRCw4QkFJQztBQW9CRDs7R0FFRztBQUNILE1BQWEsT0FBTztJQUdsQixZQUFZLElBQVk7UUFDdEIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDbkIsQ0FBQzs7OztBQUxVLDBCQUFPO0FBZ0pwQjs7Ozs7Ozs7O0dBU0c7QUFDSCxNQUFhLElBQUssU0FBUSxpQkFBUztJQVNqQzs7Ozs7O09BTUc7SUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQW1CLEVBQUU7UUFDMUMsT0FBTztZQUNMLEdBQUcsSUFBSSxDQUFDLEdBQUc7WUFDWCxHQUFHLEtBQUs7U0FDVCxDQUFDO0lBQ0osQ0FBQztJQUtEOztPQUVHO0lBQ0gsSUFBVyxJQUFJO1FBQ2IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFlBQW1CLEtBQWdCLEVBQUUsRUFBVSxFQUFFLFFBQW1CLEVBQUU7UUFDcEUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUU7WUFDZixHQUFHLElBQUksQ0FBQyxHQUFHO1lBQ1gsR0FBRyxLQUFLO1NBQ1QsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztJQUMxQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxNQUFNO1FBQ1gsTUFBTSxNQUFNLEdBQUc7WUFDYixHQUFHLElBQUksQ0FBQyxHQUFHO1lBQ1gsR0FBRztnQkFDRCxRQUFRLEVBQUUsSUFBSSxDQUFDLFNBQVM7Z0JBQ3hCLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSzthQUNqQjtTQUNGLENBQUM7UUFDRixPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6RSxHQUFHLENBQUM7WUFDSixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDYixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDVixDQUFDOzs7O0FBOUREOztHQUVHO0FBQ29CLFFBQUcsR0FBcUI7SUFDN0MsVUFBVSxFQUFFLDJCQUFrQjtJQUM5QixJQUFJLEVBQUUsTUFBTTtDQUNiLENBQUM7QUFQUyxvQkFBSSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBmaWxlIGluY2x1ZGVzIHRoZSBiYXNpYyBvYmplY3RzIGZvciBjcmVhdGluZyBUYXNrcyBhbmQgZGVwZW5kZW5jaWVzLlxuICogV2hpbGUgY2RrOHMgc3VwcG9ydHMgZ2VuZXJhdGluZyB0aGlzIGZpbGUgZnJvbSB0aGUgQ1JELCB0aGUgVGVrdG9uIENSRCBhdFxuICogdGhlIG1vbWVudCBkb2VzIG5vdCBoYXZlIHRoZSBmaWVsZHMgc3BlY2lmaWVkLiBTZWUgaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL3Rla3Rvbi1yZWxlYXNlcy9waXBlbGluZS9sYXRlc3QvcmVsZWFzZS55YW1sLFxuICogc3BlY2lmaWNhbGx5IGhlcmU6XG4gKiAgICAgICBzY2hlbWE6XG4gKiAgICAgICAgIG9wZW5BUElWM1NjaGVtYTpcbiAqICAgICAgICAgICB0eXBlOiBvYmplY3RcbiAqICAgICAgICAgICAjIE9wZW5BUElWMyBzY2hlbWEgYWxsb3dzIEt1YmVybmV0ZXMgdG8gcGVyZm9ybSB2YWxpZGF0aW9uIG9uIHRoZSBzY2hlbWEgZmllbGRzXG4gKiAgICAgICAgICAgIyBhbmQgdXNlIHRoZSBzY2hlbWEgaW4gdG9vbGluZyBzdWNoIGFzIGBrdWJlY3RsIGV4cGxhaW5gLlxuICogICAgICAgICAgICMgVXNpbmcgXCJ4LWt1YmVybmV0ZXMtcHJlc2VydmUtdW5rbm93bi1maWVsZHM6IHRydWVcIlxuICogICAgICAgICAgICMgYXQgdGhlIHJvb3Qgb2YgdGhlIHNjaGVtYSAob3Igd2l0aGluIGl0KSBhbGxvd3MgYXJiaXRyYXJ5IGZpZWxkcy5cbiAqICAgICAgICAgICAjIFdlIGN1cnJlbnRseSBwZXJmb3JtIG91ciBvd24gdmFsaWRhdGlvbiBzZXBhcmF0ZWx5LlxuICogICAgICAgICAgICMgU2VlIGh0dHBzOi8va3ViZXJuZXRlcy5pby9kb2NzL3Rhc2tzL2V4dGVuZC1rdWJlcm5ldGVzL2N1c3RvbS1yZXNvdXJjZXMvY3VzdG9tLXJlc291cmNlLWRlZmluaXRpb25zLyNzcGVjaWZ5aW5nLWEtc3RydWN0dXJhbC1zY2hlbWFcbiAqICAgICAgICAgICAjIGZvciBtb3JlIGluZm8uXG4gKiAgICAgICAgICAgeC1rdWJlcm5ldGVzLXByZXNlcnZlLXVua25vd24tZmllbGRzOiB0cnVlXG4gKiBGb3IgdGhlIHRpbWUgYmVpbmcsIHRoZXNlIG9iamVjdHMgYXJlIGNyZWF0ZWQgbWFudWFsbHkgdXNpbmcgdGhlIGxhdGVzdFxuICogVGVrdG9uIGRvY3VtZW50YXRpb24gYXMgYSByZWZlcmVuY2UuXG4gKi9cbmltcG9ydCB7IEFwaU9iamVjdCwgQXBpT2JqZWN0TWV0YWRhdGEsIEdyb3VwVmVyc2lvbktpbmQgfSBmcm9tICdjZGs4cyc7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCB7IE5hbWVkUmVzb3VyY2UsIE5hbWVLZXlQYWlyLCBUZWt0b25WMUFwaVZlcnNpb24gfSBmcm9tICcuL2NvbW1vbic7XG5cblxuLyoqXG4gKiBUaGUgc291cmNlIGZvciBhIGBlbnZgIGB2YWx1ZUZyb21gLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tFbnZWYWx1ZVNvdXJjZSB7XG4gIHJlYWRvbmx5IHNlY3JldEtleVJlZjogTmFtZUtleVBhaXI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBgZW52YCBzb3VyY2UgdGhhdCBjYW4gYmUgdXNlZCBpbiB0aGUgYGVudmAncyBgdmFsdWVGcm9tYC5cbiAqIEBwYXJhbSBuayBUaGUgbmFtZSBhbmQga2V5IHBhaXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZUZyb20obms6IE5hbWVLZXlQYWlyKTogVGFza0VudlZhbHVlU291cmNlIHtcbiAgcmV0dXJuIHtcbiAgICBzZWNyZXRLZXlSZWY6IG5rLFxuICB9O1xufVxuXG4vKipcbiAqIEFuIGBlbnZgIGZvciBhIGBTdGVwYCBvbiBhIGBUYXNrYC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYXNrU3RlcEVudiBleHRlbmRzIE5hbWVkUmVzb3VyY2V7XG4gIHJlYWRvbmx5IHZhbHVlRnJvbT86IFRhc2tFbnZWYWx1ZVNvdXJjZTtcbn1cblxuLyoqXG4gKiBBIHdvcmtzcGFjZSB1c2VkIGJ5IGEgVGFzay4gU2VlIGh0dHBzOi8vdGVrdG9uLmRldi9kb2NzL3BpcGVsaW5lcy93b3Jrc3BhY2VzLyN1c2luZy13b3Jrc3BhY2VzLWluLXRhc2tzIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tXb3Jrc3BhY2UgZXh0ZW5kcyBOYW1lZFJlc291cmNlIHtcbiAgcmVhZG9ubHkgbG9naWNhbElEPzogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB3b3Jrc3BhY2UuXG4gICAqL1xuICByZWFkb25seSBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cblxuLyoqXG4gKiBBIGBUYXNrYCByZWZlcmVuY2UuIFdpbGwgYmUgZ2VuZXJhdGVkIGFzIGEgYHRhc2tSZWZgLlxuICovXG5leHBvcnQgY2xhc3MgVGFza1JlZiB7XG4gIG5hbWU/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgVGFzayBwYXJhbWV0ZXIgdmFsdWUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGFza1BhcmFtIGV4dGVuZHMgTmFtZWRSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIHRhc2sgcGFyYW1ldGVyLlxuICAgKi9cbiAgcmVhZG9ubHkgdmFsdWU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhlIFRhc2sgcmVzdWx0cy5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vdGVrdG9uLmRldi9kb2NzL3BpcGVsaW5lcy90YXNrcy8jZW1pdHRpbmctcmVzdWx0c1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tTcGVjUmVzdWx0IGV4dGVuZHMgTmFtZWRSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHJlc3VsdC5cbiAgICovXG4gIHJlYWRvbmx5IGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgcmVzdWx0LiBUaGlzIGNvdWxkIGJlIGFuIGFycmF5LCBidXQgaWYgaXQgaXMgbm90IHN1cHBsaWVkIHRoZVxuICAgKiBkZWZhdWx0IGlzIGEgc3RyaW5nLlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBTcGVjaWZpZXMgZXhlY3V0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSBUYXNrLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tTcGVjUGFyYW0gZXh0ZW5kcyBOYW1lZFJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRoZSBwYXJhbWV0ZXIncyB0eXBlLlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZT86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBwYXJhbWV0ZXIncyBkZXNjcmlwdGlvbi5cbiAgICovXG4gIHJlYWRvbmx5IGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgZm9yIGEgcGFyYW1ldGVyLlxuICAgKi9cbiAgcmVhZG9ubHkgZGVmYXVsdD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGUgdm9sdW1lIG1vdW50IGZvciB0aGUgdGFzay5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYXNrVm9sdW1lTW91bnQgZXh0ZW5kcyBOYW1lZFJlc291cmNlIHtcbiAgcmVhZG9ubHkgbW91bnRQYXRoPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoZSBzdGVwIGZvciBhIFRhc2suIFNlZSBodHRwczovL3Rla3Rvbi5kZXYvZG9jcy9waXBlbGluZXMvdGFza3MvI2RlZmluaW5nLXN0ZXBzXG4gKiBAc2VlIGh0dHBzOi8vdGVrdG9uLmRldi9kb2NzL3BpcGVsaW5lcy9jb250YWluZXItY29udHJhY3QvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGFza1N0ZXAgZXh0ZW5kcyBOYW1lZFJlc291cmNlIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBjb250YWluZXIgaW1hZ2UgdG8gdXNlIGZvciB0aGUgU3RlcC5cbiAgICovXG4gIHJlYWRvbmx5IGltYWdlPzogc3RyaW5nO1xuICAvKipcbiAgICogQSBzY3JpcHQgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIG9uIHRoZSBpbWFnZS4gSWYgYHNjcmlwdGAgaXMgc3BlY2lmaWVkLFxuICAgKiB0aGVuIHRoZSBgY29tbWFuZGAgdmFsdWUgc2hvdWxkIG5vdCBiZSBzcGVjaWZpZWQuXG4gICAqL1xuICByZWFkb25seSBzY3JpcHQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgY29tbWFuZCBhbmQgaXRzIGFyZ3VtZW50cyAocHJvdmlkZWQgaW4gdGhlIGZvcm0gb2YgYW4gYXJyYXkpIHRvXG4gICAqIGV4ZWN1dGUgb24gdGhlIGNvbnRhaW5lci4gSWYgYGNvbW1hbmRgIGlzIHN1cHBsaWVkLCB5b3Ugc2hvdWxkIG5vdCBzdXBwbHlcbiAgICogYHNjcmlwdGAuXG4gICAqL1xuICByZWFkb25seSBjb21tYW5kPzogc3RyaW5nW107XG4gIC8qKlxuICAgKiBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHN1cHBseSBgYXJnc2AgdG8gdGhlIGBjb21tYW5kYCB2YWx1ZSBoZXJlLlxuICAgKi9cbiAgcmVhZG9ubHkgYXJncz86IHN0cmluZ1tdO1xuICAvKipcbiAgICogVGhlIHZvbHVtZSBtb3VudHMgdG8gdXNlIGZvciB0aGUgdGFzay5cbiAgICovXG4gIHJlYWRvbmx5IHZvbHVtZU1vdW50cz86IFRhc2tWb2x1bWVNb3VudFtdO1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIHdvcmtpbmcgZGlyZWN0b3J5IGZvciB0aGUgc3RlcFxuICAgKi9cbiAgcmVhZG9ubHkgd29ya2luZ0Rpcj86IHN0cmluZztcblxuICAvKipcbiAgICogRW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciB0aGUgYFN0ZXBgIG9uIHRoZSBgVGFza2AuXG4gICAqL1xuICByZWFkb25seSBlbnY/OiBUYXNrU3RlcEVudltdO1xufVxuXG5cbi8qKlxuICogVGhlIFRhc2sgc3BlYy5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vdGVrdG9uLmRldi9kb2NzL3BpcGVsaW5lcy90YXNrcy8jY29uZmlndXJpbmctYS10YXNrXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGFza1NwZWMge1xuICAvKipcbiAgICogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBgVGFza2AuXG4gICAqIEBzZWUgaHR0cHM6Ly90ZWt0b24uZGV2L2RvY3MvcGlwZWxpbmVzL3Rhc2tzLyNhZGRpbmctYS1kZXNjcmlwdGlvblxuICAgKi9cbiAgcmVhZG9ubHkgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgYFRhc2tgJ3MgcGFyYW1ldGVycy5cbiAgICogQHNlZSBodHRwczovL3Rla3Rvbi5kZXYvZG9jcy9waXBlbGluZXMvdGFza3MvI3NwZWNpZnlpbmctcGFyYW1ldGVyc1xuICAgKi9cbiAgcmVhZG9ubHkgcGFyYW1zPzogVGFza1NwZWNQYXJhbVtdO1xuXG4gIHJlYWRvbmx5IHJlc3VsdHM/OiBUYXNrU3BlY1Jlc3VsdFtdO1xuXG4gIHJlYWRvbmx5IHdvcmtzcGFjZXM/OiBUYXNrV29ya3NwYWNlW107XG4gIC8qKlxuICAgKiBUaGUgc3RlcHMgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGFzIHBhcnQgb2YgdGhlIFRhc2suIFRoZSBgU3RlcGAgc2hvdWxkXG4gICAqIGZpdCB0aGUgKGNvbnRhaW5lciBjb250cmFjdClbaHR0cHM6Ly90ZWt0b24uZGV2L2RvY3MvcGlwZWxpbmVzL2NvbnRhaW5lci1jb250cmFjdC9dXG4gICAqIEBzZWUgaHR0cHM6Ly90ZWt0b24uZGV2L2RvY3MvcGlwZWxpbmVzL3Rhc2tzLyNkZWZpbmluZy1zdGVwc1xuICAgKi9cbiAgcmVhZG9ubHkgc3RlcHM/OiBUYXNrU3RlcFtdO1xuXG59XG5cbi8qKlxuICogUHJvcGVydGllcyB1c2VkIHRvIGNyZWF0ZSB0aGUgVGFzay5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYXNrUHJvcHMge1xuICAvKipcbiAgICogVGhlIG9iamVjdCBbbWV0YWRhdGFdKGh0dHBzOi8va3ViZXJuZXRlcy5pby9kb2NzL2NvbmNlcHRzL292ZXJ2aWV3L3dvcmtpbmctd2l0aC1vYmplY3RzLyNyZXF1aXJlZC1maWVsZHMpXG4gICAqIHRoYXQgY29uZm9ybXMgdG8gc3RhbmRhcmQgS3ViZXJuZXRlcyBtZXRhZGF0YS5cbiAgICovXG4gIHJlYWRvbmx5IG1ldGFkYXRhPzogQXBpT2JqZWN0TWV0YWRhdGE7XG4gIC8qKlxuICAgKiBUaGUgYHNwZWNgIGlzIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBgVGFza2Agb2JqZWN0LlxuICAgKi9cbiAgcmVhZG9ubHkgc3BlYz86IFRhc2tTcGVjO1xufVxuXG4vKipcbiAqIEEgVGVrdG9uIFRhc2ssIHdoaWNoIGlzXG4gKiA+IGEgY29sbGVjdGlvbiBvZiBTdGVwcyB0aGF0IHlvdSBkZWZpbmUgYW5kIGFycmFuZ2UgaW5cbiAqID4gYSBzcGVjaWZpYyBvcmRlciBvZiBleGVjdXRpb24gYXMgcGFydCBvZiB5b3VyIGNvbnRpbnVvdXMgaW50ZWdyYXRpb24gZmxvdy4gQVxuICogPiBUYXNrIGV4ZWN1dGVzIGFzIGEgUG9kIG9uIHlvdXIgS3ViZXJuZXRlcyBjbHVzdGVyLiBBIFRhc2sgaXMgYXZhaWxhYmxlIHdpdGhpbiBhXG4gKiA+IHNwZWNpZmljIG5hbWVzcGFjZSwgd2hpbGUgYSBDbHVzdGVyVGFzayBpcyBhdmFpbGFibGUgYWNyb3NzIHRoZSBlbnRpcmVcbiAqID4gY2x1c3Rlci5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vdGVrdG9uLmRldi9kb2NzL3BpcGVsaW5lcy90YXNrcy9cbiAqL1xuZXhwb3J0IGNsYXNzIFRhc2sgZXh0ZW5kcyBBcGlPYmplY3Qge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgYXBpVmVyc2lvbiBhbmQga2luZCBmb3IgXCJUYXNrXCJcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR1ZLOiBHcm91cFZlcnNpb25LaW5kID0ge1xuICAgIGFwaVZlcnNpb246IFRla3RvblYxQXBpVmVyc2lvbixcbiAgICBraW5kOiAnVGFzaycsXG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBLdWJlcm5ldGVzIG1hbmlmZXN0IGZvciBcIlRhc2tcIi5cbiAgICpcbiAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBpbmxpbmUgcmVzb3VyY2UgbWFuaWZlc3RzIGluc2lkZSBvdGhlciBvYmplY3RzIChlLmcuIGFzIHRlbXBsYXRlcykuXG4gICAqXG4gICAqIEBwYXJhbSBwcm9wcyBpbml0aWFsaXphdGlvbiBwcm9wc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBtYW5pZmVzdChwcm9wczogVGFza1Byb3BzID0ge30pOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5UYXNrLkdWSyxcbiAgICAgIC4uLnByb3BzLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHJlYWRvbmx5IF9tZXRhZGF0YT86IEFwaU9iamVjdE1ldGFkYXRhO1xuICBwcml2YXRlIHJlYWRvbmx5IF9zcGVjPzogVGFza1NwZWM7XG5cbiAgLyoqXG4gICAqIFRoZSBjb25maWd1cmF0aW9uIGZvciB0aGUgYFRhc2tgLlxuICAgKi9cbiAgcHVibGljIGdldCBzcGVjKCk6IFRhc2tTcGVjIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fc3BlYztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmVzIGEgXCJUYXNrXCIgQVBJIG9iamVjdFxuICAgKiBAcGFyYW0gc2NvcGUgdGhlIHNjb3BlIGluIHdoaWNoIHRvIGRlZmluZSB0aGlzIG9iamVjdFxuICAgKiBAcGFyYW0gaWQgYSBzY29wZS1sb2NhbCBuYW1lIGZvciB0aGUgb2JqZWN0XG4gICAqIEBwYXJhbSBwcm9wcyBpbml0aWFsaXphdGlvbiBwcm9wc1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBUYXNrUHJvcHMgPSB7fSkge1xuICAgIHN1cGVyKHNjb3BlLCBpZCwge1xuICAgICAgLi4uVGFzay5HVkssXG4gICAgICAuLi5wcm9wcyxcbiAgICB9KTtcbiAgICB0aGlzLl9tZXRhZGF0YSA9IHByb3BzLm1ldGFkYXRhO1xuICAgIHRoaXMuX3NwZWMgPSBwcm9wcy5zcGVjO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIG9iamVjdCB0byBLdWJlcm5ldGVzIEpTT04uXG4gICAqL1xuICBwdWJsaWMgdG9Kc29uKCk6IGFueSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgLi4uVGFzay5HVkssXG4gICAgICAuLi57XG4gICAgICAgIG1ldGFkYXRhOiB0aGlzLl9tZXRhZGF0YSxcbiAgICAgICAgc3BlYzogdGhpcy5fc3BlYyxcbiAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMocmVzdWx0KS5yZWR1Y2UoKHIsIGkpID0+IChpWzFdID09PSB1bmRlZmluZWQpID8gciA6ICh7XG4gICAgICAuLi5yLFxuICAgICAgW2lbMF1dOiBpWzFdLFxuICAgIH0pLCB7fSk7XG4gIH1cbn1cbiJdfQ==