"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ApiObjectMetadataDefinition = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
const _util_1 = require("./_util");
const resolve_1 = require("./resolve");
/**
 * Object metadata.
 */
class ApiObjectMetadataDefinition {
    constructor(options) {
        this.name = options.name;
        this.labels = { ...options.labels } ?? {};
        this.annotations = { ...options.annotations } ?? {};
        this.namespace = options.namespace;
        this.finalizers = options.finalizers ? [...options.finalizers] : [];
        this.ownerReferences = options.ownerReferences ? [...options.ownerReferences] : [];
        this.apiObject = options.apiObject;
        this._additionalAttributes = options;
        // otherwise apiObject is passed to the resolving logic, which expectadly fails
        delete this._additionalAttributes.apiObject;
    }
    /**
     * Add a label.
     *
     * @param key - The key.
     * @param value - The value.
     */
    addLabel(key, value) {
        this.labels[key] = value;
    }
    /**
     * @returns a value of a label or undefined
     * @param key the label
     */
    getLabel(key) {
        return this.labels[key];
    }
    /**
     * Add an annotation.
     *
     * @param key - The key.
     * @param value - The value.
     */
    addAnnotation(key, value) {
        this.annotations[key] = value;
    }
    /**
     * Add one or more finalizers.
     *
     * @param finalizers the finalizers
     */
    addFinalizers(...finalizers) {
        this.finalizers.push(...finalizers);
    }
    /**
     * Add an owner.
     *
     * @param owner the owner
     */
    addOwnerReference(owner) {
        this.ownerReferences.push(owner);
    }
    /**
     * Adds an arbitrary key/value to the object metadata.
     * @param key Metadata key
     * @param value Metadata value
     */
    add(key, value) {
        this._additionalAttributes[key] = value;
    }
    /**
     * Synthesizes a k8s ObjectMeta for this metadata set.
     */
    toJson() {
        const sanitize = (x) => (0, _util_1.sanitizeValue)(x, { filterEmptyArrays: true, filterEmptyObjects: true });
        return sanitize((0, resolve_1.resolve)([], {
            ...this._additionalAttributes,
            name: this.name,
            namespace: this.namespace,
            annotations: this.annotations,
            finalizers: this.finalizers,
            ownerReferences: this.ownerReferences,
            labels: this.labels,
        }, this.apiObject));
    }
}
exports.ApiObjectMetadataDefinition = ApiObjectMetadataDefinition;
_a = JSII_RTTI_SYMBOL_1;
ApiObjectMetadataDefinition[_a] = { fqn: "cdk8s.ApiObjectMetadataDefinition", version: "2.68.60" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YWRhdGEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbWV0YWRhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxtQ0FBd0M7QUFFeEMsdUNBQW9DO0FBbUhwQzs7R0FFRztBQUNILE1BQWEsMkJBQTJCO0lBOEN0QyxZQUFZLE9BQTJDO1FBQ3JELElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRyxDQUFDO1FBQzNDLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFHLENBQUM7UUFDckQsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ25DLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3BFLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ25GLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUNuQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsT0FBTyxDQUFDO1FBRXJDLCtFQUErRTtRQUMvRSxPQUFPLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxTQUFTLENBQUM7SUFDOUMsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksUUFBUSxDQUFDLEdBQVcsRUFBRSxLQUFhO1FBQ3hDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQzNCLENBQUM7SUFFRDs7O09BR0c7SUFDSSxRQUFRLENBQUMsR0FBVztRQUN6QixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksYUFBYSxDQUFDLEdBQVcsRUFBRSxLQUFhO1FBQzdDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksYUFBYSxDQUFDLEdBQUcsVUFBb0I7UUFDMUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLGlCQUFpQixDQUFDLEtBQXFCO1FBQzVDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVO1FBQ2hDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDMUMsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTTtRQUNYLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxJQUFBLHFCQUFhLEVBQUMsQ0FBQyxFQUFFLEVBQUUsaUJBQWlCLEVBQUUsSUFBSSxFQUFFLGtCQUFrQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDckcsT0FBTyxRQUFRLENBQUMsSUFBQSxpQkFBTyxFQUFDLEVBQUUsRUFBRTtZQUMxQixHQUFHLElBQUksQ0FBQyxxQkFBcUI7WUFDN0IsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1lBQ2YsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1lBQ3pCLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztZQUM3QixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDM0IsZUFBZSxFQUFFLElBQUksQ0FBQyxlQUFlO1lBQ3JDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtTQUNwQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7O0FBaklILGtFQWtJQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNhbml0aXplVmFsdWUgfSBmcm9tICcuL191dGlsJztcbmltcG9ydCB7IEFwaU9iamVjdCB9IGZyb20gJy4vYXBpLW9iamVjdCc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAnLi9yZXNvbHZlJztcblxuLyoqXG4gKiBNZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyBvYmplY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXBpT2JqZWN0TWV0YWRhdGEge1xuICAvKipcbiAgICogVGhlIHVuaXF1ZSwgbmFtZXNwYWNlLWdsb2JhbCwgbmFtZSBvZiB0aGlzIG9iamVjdCBpbnNpZGUgdGhlIEt1YmVybmV0ZXNcbiAgICogY2x1c3Rlci5cbiAgICpcbiAgICogTm9ybWFsbHksIHlvdSBzaG91bGRuJ3Qgc3BlY2lmeSBuYW1lcyBmb3Igb2JqZWN0cyBhbmQgbGV0IHRoZSBDREsgZ2VuZXJhdGVcbiAgICogYSBuYW1lIGZvciB5b3UgdGhhdCBpcyBhcHBsaWNhdGlvbi11bmlxdWUuIFRoZSBuYW1lcyBDREsgZ2VuZXJhdGVzIGFyZVxuICAgKiBjb21wb3NlZCBmcm9tIHRoZSBjb25zdHJ1Y3QgcGF0aCBjb21wb25lbnRzLCBzZXBhcmF0ZWQgYnkgZG90cyBhbmQgYSBzdWZmaXhcbiAgICogdGhhdCBpcyBiYXNlZCBvbiBhIGhhc2ggb2YgdGhlIGVudGlyZSBwYXRoLCB0byBlbnN1cmUgdW5pcXVlbmVzcy5cbiAgICpcbiAgICogWW91IGNhbiBzdXBwbHkgY3VzdG9tIG5hbWUgYWxsb2NhdGlvbiBsb2dpYyBieSBvdmVycmlkaW5nIHRoZVxuICAgKiBgY2hhcnQuZ2VuZXJhdGVPYmplY3ROYW1lYCBtZXRob2QuXG4gICAqXG4gICAqIElmIHlvdSB1c2UgYW4gZXhwbGljaXQgbmFtZSBoZXJlLCBiZWFyIGluIG1pbmQgdGhhdCB0aGlzIHJlZHVjZXMgdGhlXG4gICAqIGNvbXBvc2FiaWxpdHkgb2YgeW91ciBjb25zdHJ1Y3QgYmVjYXVzZSBpdCB3b24ndCBiZSBwb3NzaWJsZSB0byBpbmNsdWRlXG4gICAqIG1vcmUgdGhhbiBvbmUgaW5zdGFuY2UgaW4gYW55IGFwcC4gVGhlcmVmb3JlIGl0IGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0b1xuICAgKiBsZWF2ZSB0aGlzIHVuc3BlY2lmaWVkLlxuICAgKlxuICAgKiBAZGVmYXVsdCAtIGFuIGFwcC11bmlxdWUgbmFtZSBnZW5lcmF0ZWQgYnkgdGhlIGNoYXJ0XG4gICAqL1xuICByZWFkb25seSBuYW1lPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbm5vdGF0aW9ucyBpcyBhbiB1bnN0cnVjdHVyZWQga2V5IHZhbHVlIG1hcCBzdG9yZWQgd2l0aCBhIHJlc291cmNlIHRoYXQgbWF5IGJlIHNldCBieSBleHRlcm5hbCB0b29scyB0byBzdG9yZSBhbmQgcmV0cmlldmUgYXJiaXRyYXJ5IG1ldGFkYXRhLiBUaGV5IGFyZSBub3QgcXVlcnlhYmxlIGFuZCBzaG91bGQgYmVcbiAgICogcHJlc2VydmVkIHdoZW4gbW9kaWZ5aW5nIG9iamVjdHMuXG4gICAqXG4gICAqIEBzZWUgaHR0cDovL2t1YmVybmV0ZXMuaW8vZG9jcy91c2VyLWd1aWRlL2Fubm90YXRpb25zXG4gICAqIEBkZWZhdWx0IC0gTm8gYW5ub3RhdGlvbnMuXG4gICAqL1xuICByZWFkb25seSBhbm5vdGF0aW9ucz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG5cbiAgLyoqXG4gICAqIE1hcCBvZiBzdHJpbmcga2V5cyBhbmQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgdG8gb3JnYW5pemUgYW5kIGNhdGVnb3JpemUgKHNjb3BlIGFuZCBzZWxlY3QpIG9iamVjdHMuXG4gICAqIE1heSBtYXRjaCBzZWxlY3RvcnMgb2YgcmVwbGljYXRpb24gY29udHJvbGxlcnMgYW5kIHNlcnZpY2VzLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvdXNlci1ndWlkZS9sYWJlbHNcbiAgICogQGRlZmF1bHQgLSBObyBsYWJlbHMuXG4gICAqL1xuICByZWFkb25seSBsYWJlbHM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuXG4gIC8qKlxuICAgKiBOYW1lc3BhY2UgZGVmaW5lcyB0aGUgc3BhY2Ugd2l0aGluIGVhY2ggbmFtZSBtdXN0IGJlIHVuaXF1ZS4gQW4gZW1wdHkgbmFtZXNwYWNlIGlzIGVxdWl2YWxlbnQgdG8gdGhlIFwiZGVmYXVsdFwiIG5hbWVzcGFjZSwgYnV0IFwiZGVmYXVsdFwiIGlzIHRoZSBjYW5vbmljYWwgcmVwcmVzZW50YXRpb24uXG4gICAqIE5vdCBhbGwgb2JqZWN0cyBhcmUgcmVxdWlyZWQgdG8gYmUgc2NvcGVkIHRvIGEgbmFtZXNwYWNlIC0gdGhlIHZhbHVlIG9mIHRoaXMgZmllbGQgZm9yIHRob3NlIG9iamVjdHMgd2lsbCBiZSBlbXB0eS4gTXVzdCBiZSBhIEROU19MQUJFTC4gQ2Fubm90IGJlIHVwZGF0ZWQuIE1vcmUgaW5mbzogaHR0cDovL2t1YmVybmV0ZXMuaW8vZG9jcy91c2VyLWd1aWRlL25hbWVzcGFjZXNcbiAgICpcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkICh3aWxsIGJlIGFzc2lnbmVkIHRvIHRoZSAnZGVmYXVsdCcgbmFtZXNwYWNlKVxuICAgKi9cbiAgcmVhZG9ubHkgbmFtZXNwYWNlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBOYW1lc3BhY2VkIGtleXMgdGhhdCB0ZWxsIEt1YmVybmV0ZXMgdG8gd2FpdCB1bnRpbCBzcGVjaWZpYyBjb25kaXRpb25zIGFyZVxuICAgKiBtZXQgYmVmb3JlIGl0IGZ1bGx5IGRlbGV0ZXMgcmVzb3VyY2VzIG1hcmtlZCBmb3IgZGVsZXRpb24uXG4gICAqXG4gICAqIE11c3QgYmUgZW1wdHkgYmVmb3JlIHRoZSBvYmplY3QgaXMgZGVsZXRlZCBmcm9tIHRoZSByZWdpc3RyeS4gRWFjaCBlbnRyeSBpc1xuICAgKiBhbiBpZGVudGlmaWVyIGZvciB0aGUgcmVzcG9uc2libGUgY29tcG9uZW50IHRoYXQgd2lsbCByZW1vdmUgdGhlIGVudHJ5IGZyb21cbiAgICogdGhlIGxpc3QuIElmIHRoZSBkZWxldGlvblRpbWVzdGFtcCBvZiB0aGUgb2JqZWN0IGlzIG5vbi1uaWwsIGVudHJpZXMgaW5cbiAgICogdGhpcyBsaXN0IGNhbiBvbmx5IGJlIHJlbW92ZWQuIEZpbmFsaXplcnMgbWF5IGJlIHByb2Nlc3NlZCBhbmQgcmVtb3ZlZCBpblxuICAgKiBhbnkgb3JkZXIuICBPcmRlciBpcyBOT1QgZW5mb3JjZWQgYmVjYXVzZSBpdCBpbnRyb2R1Y2VzIHNpZ25pZmljYW50IHJpc2sgb2ZcbiAgICogc3R1Y2sgZmluYWxpemVycy4gZmluYWxpemVycyBpcyBhIHNoYXJlZCBmaWVsZCwgYW55IGFjdG9yIHdpdGggcGVybWlzc2lvblxuICAgKiBjYW4gcmVvcmRlciBpdC4gSWYgdGhlIGZpbmFsaXplciBsaXN0IGlzIHByb2Nlc3NlZCBpbiBvcmRlciwgdGhlbiB0aGlzIGNhblxuICAgKiBsZWFkIHRvIGEgc2l0dWF0aW9uIGluIHdoaWNoIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIHRoZSBmaXJzdFxuICAgKiBmaW5hbGl6ZXIgaW4gdGhlIGxpc3QgaXMgd2FpdGluZyBmb3IgYSBzaWduYWwgKGZpZWxkIHZhbHVlLCBleHRlcm5hbFxuICAgKiBzeXN0ZW0sIG9yIG90aGVyKSBwcm9kdWNlZCBieSBhIGNvbXBvbmVudCByZXNwb25zaWJsZSBmb3IgYSBmaW5hbGl6ZXIgbGF0ZXJcbiAgICogaW4gdGhlIGxpc3QsIHJlc3VsdGluZyBpbiBhIGRlYWRsb2NrLiBXaXRob3V0IGVuZm9yY2VkIG9yZGVyaW5nIGZpbmFsaXplcnNcbiAgICogYXJlIGZyZWUgdG8gb3JkZXIgYW1vbmdzdCB0aGVtc2VsdmVzIGFuZCBhcmUgbm90IHZ1bG5lcmFibGUgdG8gb3JkZXJpbmdcbiAgICogY2hhbmdlcyBpbiB0aGUgbGlzdC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2t1YmVybmV0ZXMuaW8vZG9jcy9jb25jZXB0cy9vdmVydmlldy93b3JraW5nLXdpdGgtb2JqZWN0cy9maW5hbGl6ZXJzL1xuICAgKiBAZGVmYXVsdCAtIE5vIGZpbmFsaXplcnMuXG4gICAqL1xuICByZWFkb25seSBmaW5hbGl6ZXJzPzogc3RyaW5nW107XG5cbiAgLyoqXG4gICAqIExpc3Qgb2Ygb2JqZWN0cyBkZXBlbmRlZCBieSB0aGlzIG9iamVjdC4gSWYgQUxMIG9iamVjdHMgaW4gdGhlIGxpc3QgaGF2ZVxuICAgKiBiZWVuIGRlbGV0ZWQsIHRoaXMgb2JqZWN0IHdpbGwgYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuIElmIHRoaXMgb2JqZWN0IGlzXG4gICAqIG1hbmFnZWQgYnkgYSBjb250cm9sbGVyLCB0aGVuIGFuIGVudHJ5IGluIHRoaXMgbGlzdCB3aWxsIHBvaW50IHRvIHRoaXNcbiAgICogY29udHJvbGxlciwgd2l0aCB0aGUgY29udHJvbGxlciBmaWVsZCBzZXQgdG8gdHJ1ZS4gVGhlcmUgY2Fubm90IGJlIG1vcmVcbiAgICogdGhhbiBvbmUgbWFuYWdpbmcgY29udHJvbGxlci5cbiAgICpcbiAgICogS3ViZXJuZXRlcyBzZXRzIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGF1dG9tYXRpY2FsbHkgZm9yIG9iamVjdHMgdGhhdCBhcmVcbiAgICogZGVwZW5kZW50cyBvZiBvdGhlciBvYmplY3RzIGxpa2UgUmVwbGljYVNldHMsIERhZW1vblNldHMsIERlcGxveW1lbnRzLCBKb2JzXG4gICAqIGFuZCBDcm9uSm9icywgYW5kIFJlcGxpY2F0aW9uQ29udHJvbGxlcnMuIFlvdSBjYW4gYWxzbyBjb25maWd1cmUgdGhlc2VcbiAgICogcmVsYXRpb25zaGlwcyBtYW51YWxseSBieSBjaGFuZ2luZyB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZC4gSG93ZXZlciwgeW91XG4gICAqIHVzdWFsbHkgZG9uJ3QgbmVlZCB0byBhbmQgY2FuIGFsbG93IEt1YmVybmV0ZXMgdG8gYXV0b21hdGljYWxseSBtYW5hZ2UgdGhlXG4gICAqIHJlbGF0aW9uc2hpcHMuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvd29ya2luZy13aXRoLW9iamVjdHMvb3duZXJzLWRlcGVuZGVudHMvXG4gICAqIEBkZWZhdWx0IC0gYXV0b21hdGljYWxseSBzZXQgYnkgS3ViZXJuZXRlc1xuICAgKi9cbiAgcmVhZG9ubHkgb3duZXJSZWZlcmVuY2VzPzogT3duZXJSZWZlcmVuY2VbXTtcblxuICAvKipcbiAgICogQWRkaXRpb25hbCBtZXRhZGF0YSBhdHRyaWJ1dGVzLlxuICAgKiBAanNpaSBpZ25vcmVcbiAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2RrOHMtdGVhbS9jZGs4cy1jb3JlL2lzc3Vlcy8xMjk3XG4gICAqL1xuICByZWFkb25seSBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgYEFwaU9iamVjdE1ldGFkYXRhRGVmaW5pdGlvbmAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXBpT2JqZWN0TWV0YWRhdGFEZWZpbml0aW9uT3B0aW9ucyBleHRlbmRzIEFwaU9iamVjdE1ldGFkYXRhIHtcblxuICAvKipcbiAgICogV2hpY2ggQXBpT2JqZWN0IGluc3RhbmNlIGlzIHRoZSBtZXRhZGF0YSBhdHRhY2hlZCB0by5cbiAgICovXG4gIHJlYWRvbmx5IGFwaU9iamVjdDogQXBpT2JqZWN0O1xuXG59XG5cbi8qKlxuICogT2JqZWN0IG1ldGFkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgQXBpT2JqZWN0TWV0YWRhdGFEZWZpbml0aW9uIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBBUEkgb2JqZWN0LlxuICAgKlxuICAgKiBJZiBhIG5hbWUgaXMgc3BlY2lmaWVkIGluIGBtZXRhZGF0YS5uYW1lYCB0aGlzIHdpbGwgYmUgdGhlIG5hbWUgcmV0dXJuZWQuXG4gICAqIE90aGVyd2lzZSwgYSBuYW1lIHdpbGwgYmUgZ2VuZXJhdGVkIGJ5IGNhbGxpbmdcbiAgICogYENoYXJ0Lm9mKHRoaXMpLmdlbmVyYXRlZE9iamVjdE5hbWUodGhpcylgLCB3aGljaCBieSBkZWZhdWx0IHVzZXMgdGhlXG4gICAqIGNvbnN0cnVjdCBwYXRoIHRvIGdlbmVyYXRlIGEgRE5TLWNvbXBhdGlibGUgbmFtZSBmb3IgdGhlIHJlc291cmNlLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QncyBuYW1lc3BhY2UuXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgbmFtZXNwYWNlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBMYWJlbHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBsYWJlbHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG5cbiAgLyoqXG4gICAqIEFubm90YXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG9iamVjdC5cbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgYW5ub3RhdGlvbnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG5cbiAgLyoqXG4gICAqIEZpbmFsaXplcnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBmaW5hbGl6ZXJzOiBzdHJpbmdbXTtcblxuICAvKipcbiAgICogT3duZXIgcmVmZXJlbmNlcyBzZXQgZm9yIHRoaXMgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBvd25lclJlZmVyZW5jZXM6IE93bmVyUmVmZXJlbmNlW107XG5cbiAgLyoqXG4gICAqIFRoZSBBcGlPYmplY3QgdGhpcyBtZXRhZGF0YSBpcyBhdHRhY2hlZCB0by5cbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgYXBpT2JqZWN0OiBBcGlPYmplY3Q7XG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgbWV0YWRhdGEgYXR0cmlidXRlcyBwYXNzZWQgdGhyb3VnaCBgb3B0aW9uc2AuXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IF9hZGRpdGlvbmFsQXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBBcGlPYmplY3RNZXRhZGF0YURlZmluaXRpb25PcHRpb25zKSB7XG4gICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgIHRoaXMubGFiZWxzID0geyAuLi5vcHRpb25zLmxhYmVscyB9ID8/IHsgfTtcbiAgICB0aGlzLmFubm90YXRpb25zID0geyAuLi5vcHRpb25zLmFubm90YXRpb25zIH0gPz8geyB9O1xuICAgIHRoaXMubmFtZXNwYWNlID0gb3B0aW9ucy5uYW1lc3BhY2U7XG4gICAgdGhpcy5maW5hbGl6ZXJzID0gb3B0aW9ucy5maW5hbGl6ZXJzID8gWy4uLm9wdGlvbnMuZmluYWxpemVyc10gOiBbXTtcbiAgICB0aGlzLm93bmVyUmVmZXJlbmNlcyA9IG9wdGlvbnMub3duZXJSZWZlcmVuY2VzID8gWy4uLm9wdGlvbnMub3duZXJSZWZlcmVuY2VzXSA6IFtdO1xuICAgIHRoaXMuYXBpT2JqZWN0ID0gb3B0aW9ucy5hcGlPYmplY3Q7XG4gICAgdGhpcy5fYWRkaXRpb25hbEF0dHJpYnV0ZXMgPSBvcHRpb25zO1xuXG4gICAgLy8gb3RoZXJ3aXNlIGFwaU9iamVjdCBpcyBwYXNzZWQgdG8gdGhlIHJlc29sdmluZyBsb2dpYywgd2hpY2ggZXhwZWN0YWRseSBmYWlsc1xuICAgIGRlbGV0ZSB0aGlzLl9hZGRpdGlvbmFsQXR0cmlidXRlcy5hcGlPYmplY3Q7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbGFiZWwuXG4gICAqXG4gICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5LlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgYWRkTGFiZWwoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxhYmVsc1trZXldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSB2YWx1ZSBvZiBhIGxhYmVsIG9yIHVuZGVmaW5lZFxuICAgKiBAcGFyYW0ga2V5IHRoZSBsYWJlbFxuICAgKi9cbiAgcHVibGljIGdldExhYmVsKGtleTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbHNba2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gYW5ub3RhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGtleSAtIFRoZSBrZXkuXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZS5cbiAgICovXG4gIHB1YmxpYyBhZGRBbm5vdGF0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5hbm5vdGF0aW9uc1trZXldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG9uZSBvciBtb3JlIGZpbmFsaXplcnMuXG4gICAqXG4gICAqIEBwYXJhbSBmaW5hbGl6ZXJzIHRoZSBmaW5hbGl6ZXJzXG4gICAqL1xuICBwdWJsaWMgYWRkRmluYWxpemVycyguLi5maW5hbGl6ZXJzOiBzdHJpbmdbXSkge1xuICAgIHRoaXMuZmluYWxpemVycy5wdXNoKC4uLmZpbmFsaXplcnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBvd25lci5cbiAgICpcbiAgICogQHBhcmFtIG93bmVyIHRoZSBvd25lclxuICAgKi9cbiAgcHVibGljIGFkZE93bmVyUmVmZXJlbmNlKG93bmVyOiBPd25lclJlZmVyZW5jZSkge1xuICAgIHRoaXMub3duZXJSZWZlcmVuY2VzLnB1c2gob3duZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gYXJiaXRyYXJ5IGtleS92YWx1ZSB0byB0aGUgb2JqZWN0IG1ldGFkYXRhLlxuICAgKiBAcGFyYW0ga2V5IE1ldGFkYXRhIGtleVxuICAgKiBAcGFyYW0gdmFsdWUgTWV0YWRhdGEgdmFsdWVcbiAgICovXG4gIHB1YmxpYyBhZGQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLl9hZGRpdGlvbmFsQXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogU3ludGhlc2l6ZXMgYSBrOHMgT2JqZWN0TWV0YSBmb3IgdGhpcyBtZXRhZGF0YSBzZXQuXG4gICAqL1xuICBwdWJsaWMgdG9Kc29uKCkge1xuICAgIGNvbnN0IHNhbml0aXplID0gKHg6IGFueSkgPT4gc2FuaXRpemVWYWx1ZSh4LCB7IGZpbHRlckVtcHR5QXJyYXlzOiB0cnVlLCBmaWx0ZXJFbXB0eU9iamVjdHM6IHRydWUgfSk7XG4gICAgcmV0dXJuIHNhbml0aXplKHJlc29sdmUoW10sIHtcbiAgICAgIC4uLnRoaXMuX2FkZGl0aW9uYWxBdHRyaWJ1dGVzLFxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgbmFtZXNwYWNlOiB0aGlzLm5hbWVzcGFjZSxcbiAgICAgIGFubm90YXRpb25zOiB0aGlzLmFubm90YXRpb25zLFxuICAgICAgZmluYWxpemVyczogdGhpcy5maW5hbGl6ZXJzLFxuICAgICAgb3duZXJSZWZlcmVuY2VzOiB0aGlzLm93bmVyUmVmZXJlbmNlcyxcbiAgICAgIGxhYmVsczogdGhpcy5sYWJlbHMsXG4gICAgfSwgdGhpcy5hcGlPYmplY3QpKTtcbiAgfVxufVxuXG4vKipcbiAqIE93bmVyUmVmZXJlbmNlIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byBsZXQgeW91IGlkZW50aWZ5IGFuIG93bmluZ1xuICogb2JqZWN0LiBBbiBvd25pbmcgb2JqZWN0IG11c3QgYmUgaW4gdGhlIHNhbWUgbmFtZXNwYWNlIGFzIHRoZSBkZXBlbmRlbnQsIG9yXG4gKiBiZSBjbHVzdGVyLXNjb3BlZCwgc28gdGhlcmUgaXMgbm8gbmFtZXNwYWNlIGZpZWxkLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE93bmVyUmVmZXJlbmNlIHtcbiAgLyoqXG4gICAqIEFQSSB2ZXJzaW9uIG9mIHRoZSByZWZlcmVudC5cbiAgICovXG4gIHJlYWRvbmx5IGFwaVZlcnNpb246IHN0cmluZztcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgQU5EIGlmIHRoZSBvd25lciBoYXMgdGhlIFwiZm9yZWdyb3VuZERlbGV0aW9uXCIgZmluYWxpemVyLCB0aGVuIHRoZVxuICAgKiBvd25lciBjYW5ub3QgYmUgZGVsZXRlZCBmcm9tIHRoZSBrZXktdmFsdWUgc3RvcmUgdW50aWwgdGhpcyByZWZlcmVuY2UgaXNcbiAgICogcmVtb3ZlZC4gRGVmYXVsdHMgdG8gZmFsc2UuIFRvIHNldCB0aGlzIGZpZWxkLCBhIHVzZXIgbmVlZHMgXCJkZWxldGVcIlxuICAgKiBwZXJtaXNzaW9uIG9mIHRoZSBvd25lciwgb3RoZXJ3aXNlIDQyMiAoVW5wcm9jZXNzYWJsZSBFbnRpdHkpIHdpbGwgYmVcbiAgICogcmV0dXJuZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlLiBUbyBzZXQgdGhpcyBmaWVsZCwgYSB1c2VyIG5lZWRzIFwiZGVsZXRlXCIgcGVybWlzc2lvbiBvZiB0aGVcbiAgICogb3duZXIsIG90aGVyd2lzZSA0MjIgKFVucHJvY2Vzc2FibGUgRW50aXR5KSB3aWxsIGJlIHJldHVybmVkLlxuICAgKi9cbiAgcmVhZG9ubHkgYmxvY2tPd25lckRlbGV0aW9uPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhpcyByZWZlcmVuY2UgcG9pbnRzIHRvIHRoZSBtYW5hZ2luZyBjb250cm9sbGVyLlxuICAgKi9cbiAgcmVhZG9ubHkgY29udHJvbGxlcj86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEtpbmQgb2YgdGhlIHJlZmVyZW50LlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0Lms4cy5pby9jb21tdW5pdHkvY29udHJpYnV0b3JzL2RldmVsL3NpZy1hcmNoaXRlY3R1cmUvYXBpLWNvbnZlbnRpb25zLm1kI3R5cGVzLWtpbmRzXG4gICAqL1xuICByZWFkb25seSBraW5kOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHJlZmVyZW50LlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvdXNlci1ndWlkZS9pZGVudGlmaWVycyNuYW1lc1xuICAgKi9cbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVSUQgb2YgdGhlIHJlZmVyZW50LlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvdXNlci1ndWlkZS9pZGVudGlmaWVycyN1aWRzXG4gICAqL1xuICByZWFkb25seSB1aWQ6IHN0cmluZztcblxufVxuIl19